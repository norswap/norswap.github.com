<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>norswap</title>
    <description></description>      
    <link>http://norswap.com/</link>
    <atom:link href="http://norswap.com/atom.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Every Anime I Ever Watched</title>
      <description>
&lt;p&gt;I haven&amp;#39;t watched very many anime. I am a late bloomer to the whole genra, which
I long dismissed as goofy.&lt;/p&gt;
&lt;p&gt;This was misguided: there is a real diversity of styles and stories in anime.
Many (if not most) of them do beyond the fairly rigid lines inside which most
western TV shows are confined. This is not necessarily a good thing, but it is
the willingness to fully explore a direction or incorporate unusual elements
that often yields brillance. Animation is also a medium that yields a lot of
creative possibilities on a much tighter budget than film. It&amp;#39;s actually a shame
that this medium is treated seriously only in Japan, while here it struggles to
come out of the &amp;quot;for kids&amp;quot; box. If, like I did, you have an unexamined bias
against anime, consider giving them a shot nonetheless.&lt;/p&gt;
&lt;p&gt;This is a pity, as most shows on this list date from my high school (2002-2008)
or even university (2008-2013) years. I, however, was totally unaware that anime
was reaching some new (ongoing) golden era. In retrospect, I identified anime
with things like Dragon Ball, Naruto and Bleach; all of which are long-running
shonen (boy manga) adaptations. This probably explains why I identified anime as
goofy and full of fillers (although shonen does not imply those things).&lt;/p&gt;
&lt;p&gt;That being said, here is a list of all (15) animes I ever watched, with my
appreciation of them. Don&amp;#39;t expect dazzling insights here. Some of them I
watched quite a while ago, and the impressions that remain are sometimes hazy. I
think that&amp;#39;s interesting though: what impressions remains when the rest is gone.
When other people have interesting things to say about the show, I&amp;#39;ll point to
them as well.&lt;/p&gt;
&lt;p&gt;The anime appear in chronological order of me watching them (as far as I can
remember).&lt;/p&gt;
&lt;h2 id=&quot;sword-art-online&quot;&gt;Sword Art Online&lt;/h2&gt;
&lt;p&gt;I got inspired to watch Sword Art Online because I liked its MMORPG theme. I had
a bit of a love story with early World of Warcraft, followed by a subsequent
disillusion about MMORPGs, which I think is a genre that is exploited well
beyond its enormous potential.&lt;/p&gt;
&lt;p&gt;As it turns out, MMORPG-themed anime are an emerging genra known as &lt;em&gt;isekai&lt;/em&gt;. I
didn&amp;#39;t know that as I set out to watch SAO though, and was mostly drawn in by
how gorgeous and ambitious the MMO featured in the show seemed.&lt;/p&gt;
&lt;p&gt;This show became really popular, and attracted a lot of criticism as the show&amp;#39;s
popularity was perceived to be completely disproportionate to its quality.&lt;/p&gt;
&lt;p&gt;For a comprehensive summary of the criticism against this anime, check
out &lt;a href=&quot;https://www.youtube.com/watch?v=3uON7ANNOi4&quot;&gt;Sword Art Online - An Analytical Diatribe&lt;/a&gt; by anime commentator
Digibro. I will simply say that while I agree with most of what he has to say, I
enjoyed the show nonetheless. A bit like Doctor Who, this show works best when
you don&amp;#39;t question its premises too hard. The show works well with simple
emotions and many sections manage to be touching.&lt;/p&gt;
&lt;p&gt;I would have to rewatch the show to be able to articulate why I liked it so
much. I think the first half of the first season is the strongest part of the
show, while its second part is the weakest. The second season is more equal,
packing great action in its first part and some emotional punch in the second.&lt;/p&gt;
&lt;p&gt;With a show so polarizing, the best thing you can do is give it a try. No need
to be particularly patient: if you don&amp;#39;t enjoy the first few episode, the show
is not cut out for you.&lt;/p&gt;
&lt;h2 id=&quot;neon-genesis-evangelion&quot;&gt;Neon Genesis Evangelion&lt;/h2&gt;
&lt;p&gt;Evangelion, or Eva for short, is one of the most iconic anime out there. It&amp;#39;s a
mecha anime, with a heavily cabbalistic motif, and psychological themes. Dating
from 1995, it&amp;#39;s also the oldest anime series on this list, a cult classic.&lt;/p&gt;
&lt;p&gt;The aesthetics of the show are wonderful, and it&amp;#39;s easy to see how it was such
an influence (something which I was told rather than noticed myself).&lt;/p&gt;
&lt;p&gt;My big problem with this show is it&amp;#39;s main protagonist, Shinji. Shinji has
troubles you see. Shinji is sad and just &lt;em&gt;does not want&lt;/em&gt; to fight in the robot.
Of course, that&amp;#39;s supposed to be one of the big theme of the series, but after a
while it just isn&amp;#39;t enjoyable anymore and if you&amp;#39;re like me, you&amp;#39;ll find
yourself singing &lt;a href=&quot;https://soundcloud.com/ferrousfellow/shinji-get-in-the-robot&quot;&gt;Shinji get in the robot&lt;/a&gt; (also see the hilarious &lt;a href=&quot;https://www.youtube.com/watch?v=ygWPB_FevFU&quot;&gt;Yo!
version&lt;/a&gt;). If you can get past Shinji, the show is well worth a watch though. I
definitely don&amp;#39;t regret watching it.&lt;/p&gt;
&lt;p&gt;Second sidebar: for some reason, anime showmaker seem to have a fascination with
mystical, and often cabbalistic motifs. Considering only this list, these motifs
can be found in Eva, Attack on Titan, Fullmetal Alchemist and Code Geass.&lt;/p&gt;
&lt;h2 id=&quot;guilty-crown&quot;&gt;Guilty Crown&lt;/h2&gt;
&lt;p&gt;I enjoyed Evangelion very much. So much in fact that I went looking for a show
like it, and that&amp;#39;s how, in some roundabout way I ended up with Guilty Crown.
Unbeknownst to me, Guilty Crown is actually much closer to Code Geass (see
later) than Evangelion.&lt;/p&gt;
&lt;p&gt;The series start off on a strong premise, but its second half is a bit too much
for me. And it suffers from the same flaw as Code Geass: plot developments are
kind of ex machinima, and the series finds itself trapped inside the exponential
development of its own &amp;quot;logic&amp;quot;, threatening the suspension of disbelief
necessary to enjoy shows like this.&lt;/p&gt;
&lt;p&gt;It&amp;#39;s incredibly well animated however (it&amp;#39;s from the same director as Death Note
and Attack on Titan), and if you think that Code Geass is the best thing since
sliced bread, you ought to watch this one as well.&lt;/p&gt;
&lt;p&gt;The video &lt;a href=&quot;https://www.youtube.com/watch?v=Ly1ETP8lU0Q&quot;&gt;How to direct mainstream anime&lt;/a&gt; by Digibro does a really good job of
describing the appeal of the show, more eloquently than I could.&lt;/p&gt;
&lt;h2 id=&quot;fullmetal-alchemist-fullmetal-alchemist-brotherhood&quot;&gt;Fullmetal Alchemist &amp;amp; Fullmetal Alchemist: Brotherhood&lt;/h2&gt;
&lt;p&gt;The story of the brothers Alphonse and Edward Elric is great. So great, in fact,
that it warranted not one, but two anime adaptations. One in 2003 and one in
2009.&lt;/p&gt;
&lt;p&gt;Both are very good, but it is widely recognized that the &lt;em&gt;Brotherhood&lt;/em&gt; (2009)
version is the superior one by a very wide margin. Both shows are nearly
identical for the first ten episodes, then diverge wildly.&lt;/p&gt;
&lt;p&gt;The basic pitch is that young Alphonse and Edward live with their mother, their
father having left for god-knows-where. Both kids show a rare aptitude for
Alchemy (essentially transformative magic). When their mother dies, the grief
pushes them to try something forbidden and bring their mother back to life. This
doesn&amp;#39;t work and backfires badly besides, as Alphonse loses his body (but not
his soul, which Edward manages to bind to a big-ass suit of armor in extremis),
and Edward loses an arm and a leg (to be replaced with bionic implements). Our
heroes then embark on a quest to get their bodies back and uncover dark secrets
in the process.&lt;/p&gt;
&lt;p&gt;Both shows are very accessible: they fit our idea of what a cartoon depicting a
heroic story should be. The story is great, the world-building frankly amazing
(especially in Brotherhood), and the shows features a strong cast of secondary
characters. Nevertheless, it is an anime, and it does feature some of the
genre&amp;#39;s quirks. The thoughts of many characters are very much on display. This
focus on &amp;quot;self-talk&amp;quot; is commonplace in anime, but rare in western flits. The
villains are also slightly disturbing, another thing that anime tends to do
well.&lt;/p&gt;
&lt;p&gt;Fullmetal Alchemist is perhaps the perfect gateway drug into anime, and even if
you don&amp;#39;t end up being an anime guy or gal, you might just end up liking this
one. Brotherhood is currently the second-best rated anime
on &lt;a href=&quot;https://myanimelist.net/topanime.php&quot;&gt;MyAnimeList.net&lt;/a&gt;, and that makes it as close to an anime plebiscite
as you&amp;#39;ll ever get.&lt;/p&gt;
&lt;p&gt;While Brotherhood is the superior version, I suggest you start with the 2003
version if you intend to watch both like I did. Both are good, but I&amp;#39;m afraid
the 2003 version will be a letdown after watching Brotherhood.&lt;/p&gt;
&lt;h2 id=&quot;log-horizon&quot;&gt;Log Horizon&lt;/h2&gt;
&lt;p&gt;Like Sword Art Online, Log Horizon is about people getting trapped inside a MMO,
but that&amp;#39;s about where the similarity ends. Log Horizon is less concerned about
the animation and drama, but more about building a fully-fleshed coherent
worlds, where the protagonists have to contend with this new universe as they
progressively uncovers its rules.&lt;/p&gt;
&lt;p&gt;The cast is a strong reason to like the show, it&amp;#39;s just eminently lovable. The
main guy — Shiroe — is this bespectacled sly schemer, but with a heart of gold,
and otherwise a perfectly sensible guy. His companions each bring something of
their own, and it&amp;#39;s a pleasure to see them work together.&lt;/p&gt;
&lt;p&gt;The world is really well-done, and the mysteries are intertwined with the game
mechanics (which will look familiar to anyone who ever played an MMO). The
heroes attempt to discover how (and why) this world works, even while they have
to deal the threats it throws at them.&lt;/p&gt;
&lt;p&gt;The only bad thing about Log Horizon is that it is unfinished. But apparently
work on the source material (a light novel) is still ongoing, even though it&amp;#39;s
barely ahead of the anime at this point. So there is hope.&lt;/p&gt;
&lt;h2 id=&quot;attack-on-titan&quot;&gt;Attack on Titan&lt;/h2&gt;
&lt;p&gt;It&amp;#39;s hard to do justice to Attack on Titan with words alone, because this show
is all about its over the top animation and its epic-sized story. The combat
choreography is really impressive. Just watch &lt;a href=&quot;https://www.youtube.com/watch?v=MGRm4IzK1SQ&quot;&gt;this trailer&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The story takes place in a world where titans - almost indestructible monstruous
giant humanoids roam free. To protect itself, what remains of humanity has
erected three giant concentric walls behind which they found safety. Things are
peaceful, until a giant titan appears and breaches the outer wall.&lt;/p&gt;
&lt;p&gt;Whatever it is — and it is many things — Attack on Titan is never boring. I
suggest you give it a shot.&lt;/p&gt;
&lt;p&gt;The aforementionned video &lt;a href=&quot;https://www.youtube.com/watch?v=Ly1ETP8lU0Q&quot;&gt;How to direct mainstream anime&lt;/a&gt; also touches on the
greatness of this show.&lt;/p&gt;
&lt;p&gt;As a side note, something that figures very prominently in Attack on Titan is
the space given to the characters&amp;#39; thoughts. This is a somewhat common anime
trait. Some long minutes are spend within some characters&amp;#39; inner monologue, and,
somewhat amazingly, it (mostly) works.&lt;/p&gt;
&lt;h2 id=&quot;kanon-2006-&quot;&gt;Kanon (2006)&lt;/h2&gt;
&lt;p&gt;Kanon is something very different from everything so far. It&amp;#39;s a &amp;quot;cute anime&amp;quot;.
It was adapted from a successful visual novel (an interactive conversation-based
video game).&lt;/p&gt;
&lt;p&gt;It follows protagonist Yuichi Aizawa as he moves in with his aunt and cousin,
which live in another town and starts classes in a new school. The story
revolves around Yuichi&amp;#39;s encounters with a few girls and how he gets to know
them and help them overcome their problems.&lt;/p&gt;
&lt;p&gt;It&amp;#39;s very well done. It&amp;#39;s very innocent, mostly light but with some depth thrown
in at the right places. There is a sort of poesy to it. This is not the kind of
show that you want to binge watch. It requires a bit of a contemplative mindset.&lt;/p&gt;
&lt;p&gt;I originally watched this show because it was the favorite anime of the
machinima/AMV maker &lt;a href=&quot;https://www.youtube.com/user/snobaste/videos&quot;&gt;Snoman&lt;/a&gt;. Check out his &lt;a href=&quot;https://www.youtube.com/playlist?list=PLiZkNl164CsD5zBoEpWgV6Wi6aZgX0fvM&quot;&gt;Dreamscape&lt;/a&gt; series, a favorite of
mine.&lt;/p&gt;
&lt;p&gt;As for me, I liked it. But it&amp;#39;s the kind of show I wouldn&amp;#39;t necessarily seek
out, and I probably want to space them out healthily, lest they become a bore or
lose their magic.&lt;/p&gt;
&lt;h2 id=&quot;code-geass&quot;&gt;Code Geass&lt;/h2&gt;
&lt;p&gt;Code Geass is one of the most popular anime shows in the last decade. It follows
the story of Lelouch, secretly the son of Brittania&amp;#39;s emperor, who went into
hiding after his mother was assassinated by a rival faction and Brittania
invaded Japan.&lt;/p&gt;
&lt;p&gt;Lelouch hates Brittania — and his father — with a passion, and has woved to
avenge his mother. His dreams become possible as he acquires a very special
power. So, using his superior intellect and enlisting the help of the Japanese
rebellion, he sets to work.&lt;/p&gt;
&lt;p&gt;The anime is good, but I have some reservations about it. Plot developments feel
very ex machina. For a show that puts forward the intellectual and planning
capability of his main protagonist, this is a bit jarring. This is a sharp
contrast with Log Horizon, where Shiroe&amp;#39;s ability is extremely believable.&lt;/p&gt;
&lt;p&gt;The way Lelouch and Suzaku (his frenemy) reason is also really baffling at
times. This holds true even when they make emotional or value-based decisions.
This is relatively common in anime (and maybe a certain culture gap is to
blame), but reaches impressive heights in Code Geass.&lt;/p&gt;
&lt;p&gt;I tend to like the first season more than the second, which is apparently not
the consensus. The second season escalates the stakes &lt;em&gt;a lot&lt;/em&gt;. Accordingly,
characters evolve and turn somewhat parodic as they try to juggle all these
responsibilities. This seems interesting, but only magnifies the aforementionned
flaws.&lt;/p&gt;
&lt;p&gt;It&amp;#39;s also interesting that I was much more positive while watching it. The first
season went into a satisfying crescendo, although I object strongly to a big
ex-machina at the end. The second season was less brilliant, but what really
disappointed me in retrospect was the resolution. There are a few mysteries
teased out during the show, and they aren&amp;#39;t really resolved to my satisfaction.
Some aren&amp;#39;t resolved, while other are but don&amp;#39;t impact the story. In particular,
a very big mystery is unceremonioulsy expedited in one or two episodes, and
happens to have very little bearing on the plot whatsoever, while on the outset
it feels like this could underpin the whole thing.&lt;/p&gt;
&lt;p&gt;Don&amp;#39;t get me wrong, Code Geass is well worth watching. Nevertheless, if I had to
pick the most overhyped one in this list, it would be this one.&lt;/p&gt;
&lt;h2 id=&quot;cowboy-bebop&quot;&gt;Cowboy Bebop&lt;/h2&gt;
&lt;p&gt;While we&amp;#39;re on the topic of overhyped, welcome Cowboy Bebop.&lt;/p&gt;
&lt;p&gt;My impression of Cowboy Bebop is that it&amp;#39;s an impressive anime — one with mature
themes and a real reflection — which happens to be buried in a heap of goofy
filler.&lt;/p&gt;
&lt;p&gt;Cowboy Bebop is overhyped not because it&amp;#39;s bad, but because it is held in an
almost cult-like following by some people. Nevertheless, my critique (about
fillers) is probably the one most frequently leveraged against the show.&lt;/p&gt;
&lt;p&gt;The premise is rather simple, and I&amp;#39;ll quote wikipedia here:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The original crew are Spike Spiegel, an exiled former hitman of the criminal
Red Dragon Syndicate, and his partner Jet Black, a former ISSP officer. They
are later joined by Faye Valentine, an amnesiac con artist; Edward Wong, an
eccentric girl skilled in hacking; and Ein, a genetically-engineered Pembroke
Welsh Corgi with human-like intelligence. Over the course of the series, the
team get involved in disastrous mishaps leaving them out of pocket, while
often confronting faces and events from their past.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The problem with the crew&amp;#39;s misfortunes is that they are all really silly and
sort-of slapstick, while the shows&amp;#39; aestehtic is more Noir/Western. This was a
bit of a mood spoiler for me, in a show that is all about mood (featuring by the
way, really great music).&lt;/p&gt;
&lt;p&gt;Still, if you manage to power through the initial filler (I almost didn&amp;#39;t), I
don&amp;#39;t think you&amp;#39;ll regret watching Cowboy Bebop.&lt;/p&gt;
&lt;p&gt;If you need convincing, listen to &lt;a href=&quot;https://www.youtube.com/watch?v=Ip5CpjXR4CI&quot;&gt;this elegy&lt;/a&gt; of the show by Digibro. I think
Cowboy Bebop deserves that praise, but it&amp;#39;s hard to see at first, especially if
you&amp;#39;re not looking at the right place like I was.&lt;/p&gt;
&lt;p&gt;In the end, Cowboy Bebop leaves me with a bittersweet taste, and not only
because it tells a bittersweet story. It could have been so much better with a
few adjustment. I feel like there&amp;#39;s a better, leaner story trying to get out.&lt;/p&gt;
&lt;p&gt;Let&amp;#39;s just say that if I won the lottery, a fan cut of Cowboy Bebbop would
probably be a worthwhile project to saddle myself with.&lt;/p&gt;
&lt;h2 id=&quot;konosuba-&quot;&gt;Konosuba!&lt;/h2&gt;
&lt;p&gt;I watched Konosuba! after hearing Digibro praise it so much (see for instance
&lt;a href=&quot;https://www.youtube.com/watch?v=w-sZAPBIcQM&quot;&gt;this video&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;The basic premise is that this is a parody of the isekai &amp;quot;trapped in a MMO&amp;quot;
genre (things like Sword Art Online and Log Horizon).&lt;/p&gt;
&lt;p&gt;Unlike Digibro, I wouldn&amp;#39;t call the show hilarious, but it&amp;#39;s strangely endearing
and it almost always brought a smile to my face.&lt;/p&gt;
&lt;p&gt;I know I complained a lot about goofiness before, but this is goofiness done
right, and for its own sake. Despite that, the story-telling and world-building
are strong, and we&amp;#39;re not just fed a series of clip, but rather an adventure in
a universe that feels alive. Like Digibro alluded to, the story builds upon its
own gags as a way to move the plot forward, and that&amp;#39;s a big part of the appeal.&lt;/p&gt;
&lt;p&gt;Highly recommended if you&amp;#39;re looking for something light.&lt;/p&gt;
&lt;h2 id=&quot;yuri-on-ice&quot;&gt;Yuri!! on Ice&lt;/h2&gt;
&lt;p&gt;An anime about gay figure skaters. Doesn&amp;#39;t that sound awesome?&lt;/p&gt;
&lt;p&gt;Well it is. I watched this one with my girlfriend, who&amp;#39;s totally a fan, and we
had a blast. It&amp;#39;s a nice story, sentimal at times, but in a way that works.&lt;/p&gt;
&lt;p&gt;A few notables things about the show (some of which are, again, inspired by
Digibro&amp;#39;s &lt;a href=&quot;https://www.youtube.com/watch?v=9MxbvZ2Wd5I&quot;&gt;commentary&lt;/a&gt;):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;It&amp;#39;s rare for a show to feature a main character this age and position. Yuri
is 24 and he&amp;#39;s an ice skater nearing the end of his carreer. He doesn&amp;#39;t have
to prove himself, but rather he wants to go out in style, and that&amp;#39;s an
interesting change. While he&amp;#39;s obviously great at figure skating, he&amp;#39;s also
not a &amp;quot;genius&amp;quot; the way some other characters are. He spent a huge amount of
time practicing (and sacrificing some of his youth in the process). That&amp;#39;s a
nice difference from most anime heroes who seemingly get all their skills for
free.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The first half of the season is better than the second half, which focuses a
bit too much on the skating competitions. However at this point you&amp;#39;re likely
to be fully on board so you shouldn&amp;#39;t feel the pain too much.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The show is very realistic. The skating is realistic, maybe too much so as you
sometimes can&amp;#39;t tell who is doing well and who isn&amp;#39;t. The characters are
colorful, but authentic. The show features social media heavily (mostly
Instagram and online streaming) in a way that is familiar, clever &lt;strong&gt;and&lt;/strong&gt;
relevant to the story. This contributes to firmly anchor the show in our
modern world.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;serial-experiments-lain&quot;&gt;Serial Experiments Lain&lt;/h2&gt;
&lt;p&gt;I have little to say about this one as I stopped watching right after the first
episode. Serial Experiments Lain is widely considered to be a masterpiece, but I
really didn&amp;#39;t dig the mood.&lt;/p&gt;
&lt;p&gt;From what I knew beforehand and the first episode, I would say that alienation
and, more broadly, psychology of the less happy kind are pre-eminent themes of
this show. This is amplified by an oppressive art direction.&lt;/p&gt;
&lt;p&gt;Evangelion was almost too much for me, and it has awesome colorful robot fights.
So I didn&amp;#39;t pursue. Maybe I&amp;#39;ll revisit some day.&lt;/p&gt;
&lt;p&gt;But then again, many people think it&amp;#39;s the best thing since sliced bread, so do
get other opinions.&lt;/p&gt;
&lt;h2 id=&quot;gurren-lagann&quot;&gt;Gurren Lagann&lt;/h2&gt;
&lt;p&gt;Gurren Lagann is awesome, as per the dated definition: &amp;quot;Causing awe or terror;
inspiring wonder or excitement.&amp;quot;&lt;/p&gt;
&lt;p&gt;In &lt;a href=&quot;http://norswap.com/gurren-lagann-reaction/&quot;&gt;a brief&lt;/a&gt; I wrote about it, here&amp;#39;s what I had to say:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The anime is completely over-the-top, but somehow it all works out beautiful.
It&amp;#39;s an ode to fighting spirit, and the force of will. It&amp;#39;s pure motivation
cranked out to 10. I know it will stay with me a long time.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But it&amp;#39;s actually more subtle than that. Yes it&amp;#39;s over-the-top, but the rules
that preside over the world are so loose that the story does not seem disjointed
or driven by ex machinas. The logic driving the show has its own consistency;
and despite how miraculous things turn out, one never feels betrayed.&lt;/p&gt;
&lt;p&gt;Second, the show has a surprising amount of maturity to it, albeit this maturity
is hidden beneath the surface. This is mostly manifested in the character&amp;#39;s
reaction to some pretty shaking events; and how, ultimately, they react to them
in a way that is, for lack of a better word, healthy.&lt;/p&gt;
&lt;p&gt;There is a very good analysis of these aspect of the show by Aleczandxr, but it
completely spoils the plot: &lt;a href=&quot;https://www.youtube.com/watch?v=9m19OsgLMkI&quot;&gt;Gurren Lagann&amp;#39;s Underappreciated Maturity&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This is one of my two favorite anime of the list (along with Log Horizon), and
so of course it comes highly recommended.&lt;/p&gt;
&lt;p&gt;PS: &lt;a href=&quot;https://www.youtube.com/playlist?list=PLiZkNl164CsCwiN9tAyzxf6xU08msx-QS&quot;&gt;Epic Music&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;black-lagoon&quot;&gt;Black Lagoon&lt;/h2&gt;
&lt;p&gt;Black Lagoon tells the story of a former Japanese salaryman that integrates a
small crew of mercenaries. It was recommended to me by a few friends who said it
was their favorite anime.&lt;/p&gt;
&lt;p&gt;What this show gets right is the mood: this is what I expected Cowboy Bebop to
feel like (adjusted for context). Some charcters also undergo interesting
character development, especially towards the beginning of the season.&lt;/p&gt;
&lt;p&gt;Perhaps the most frustrating thing with this anime is that it doesn&amp;#39;t have a
proper ending. Very much like Log Horizon, it is based on a manga series that is
ongoing (albeit very slowly). The ending we got may qualify as a pseudo-ending
but it was definitely below the expectations set by the beginning of the show.&lt;/p&gt;
&lt;p&gt;A solid anime, well worth a watch.&lt;/p&gt;
      </description>
      <pubDate>2017-06-02T22:00:00.000Z</pubDate>
      <link>http://norswap.com/every-anime</link>
      <guid isPermaLink="true">http://norswap.com/every-anime</guid>
    </item>
    <item>
      <title>Programming Sucks</title>
      <description>
&lt;p&gt;Source: &lt;a href=&quot;http://www.stilldrinking.org/programming-sucks&quot;&gt;http://www.stilldrinking.org/programming-sucks&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Every programmer occasionally, when nobody’s home, turns off the lights, pours a
glass of scotch, puts on some light German electronica, and opens up a file on
their computer. It’s a different file for every programmer. Sometimes they wrote
it, sometimes they found it and knew they had to save it. They read over the
lines, and weep at their beauty, then the tears turn bitter as they remember the
rest of the files and the inevitable collapse of all that is good and true in
the world.&lt;/p&gt;
&lt;p&gt;This file is Good Code. It has sensible and consistent names for functions and
variables. It’s concise. It doesn’t do anything obviously stupid. It has never
had to live in the wild, or answer to a sales team. It does exactly one,
mundane, specific thing, and it does it well. It was written by a single person,
and never touched by another. It reads like poetry written by someone over
thirty.&lt;/p&gt;
&lt;p&gt;Every programmer starts out writing some perfect little snowflake like this.
Then they’re told on Friday they need to have six hundred snowflakes written by
Tuesday, so they cheat a bit here and there and maybe copy a few snowflakes and
try to stick them together or they have to ask a coworker to work on one who
melts it and then all the programmers’ snowflakes get dumped together in some
inscrutable shape and somebody leans a Picasso on it because nobody wants to see
the cat urine soaking into all your broken snowflakes melting in the light of
day. Next week, everybody shovels more snow on it to keep the Picasso from
falling over.&lt;/p&gt;
      </description>
      <pubDate>2017-05-09T22:00:00.000Z</pubDate>
      <link>http://norswap.com/programming-sucks</link>
      <guid isPermaLink="true">http://norswap.com/programming-sucks</guid>
    </item>
    <item>
      <title>briefly</title>
      <description>
&lt;p&gt;&lt;img src=&quot;/gurren-lagann-reaction/team-gurren.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;I just watched the anime &lt;a href=&quot;https://myanimelist.net/anime/2001/Tengen_Toppa_Gurren_Lagann&quot;&gt;Tengen Toppa Gurren Lagann&lt;/a&gt;. And: oh. my.&lt;/p&gt;
&lt;p&gt;Admittedly I&amp;#39;m almost exactly 10 years late to the party. But if you are too and
have no prejudice against anime&lt;strong&gt;*&lt;/strong&gt;, do yourself a favour and watch it;
especially if you sometimes struggle with motivation.&lt;/p&gt;
&lt;p&gt;The anime is completely over-the-top, but somehow it all works out beautiful.
It&amp;#39;s an ode to fighting spirit, and the force of will. It&amp;#39;s pure motivation
cranked out to 10. I know it will stay with me a long time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;*&lt;/strong&gt; Anime is probably one of the most inventive medium currently out there. I
really should write about it sometimes. It was prejudiced against it enough in
my youth that I didn&amp;#39;t explore it. I could say I regret it, but I prefer to
think it&amp;#39;s just more good stuff to feed on now.&lt;/p&gt;
      </description>
      <pubDate>2017-04-10T22:00:00.000Z</pubDate>
      <link>http://norswap.com/gurren-lagann-reaction</link>
      <guid isPermaLink="true">http://norswap.com/gurren-lagann-reaction</guid>
    </item>
    <item>
      <title>briefly</title>
      <description>
&lt;p&gt;&lt;img src=&quot;/reflets-d-acides-fini/rda.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;If you speak French and do not know about it yet, check out &lt;a href=&quot;http://www.refletsdacide.com/presentation/&quot;&gt;Reflets d&amp;#39;Acide&lt;/a&gt;.
It&amp;#39;s an humourous fantasy &amp;quot;mp3 saga&amp;quot; (apparently the proper english term is
&amp;quot;audio drama&amp;quot;). It&amp;#39;s now finally complete (well, the first season) after more
than 10 years in the running.&lt;/p&gt;
&lt;p&gt;It distinguishes itself from other offerings in the same vein by its subtle
humor, layered construction and masterful use of the French language. It even
uses a non-trivial amount of &lt;a href=&quot;https://en.wiktionary.org/wiki/alexandrine#English&quot;&gt;alexandrines&lt;/a&gt; being used. It&amp;#39;s a bombastic love
letter to French, laid out in the least boring way possible: as a delightful
heroic fantasy tale. I still find things in there after listening to it at least
ten times.&lt;/p&gt;
&lt;p&gt;I don&amp;#39;t know about any English-language equivalent. At the very least, they
haven&amp;#39;t had the same kind of impact on geek culture as Reflets d&amp;#39;Acide and other
sagas (&lt;a href=&quot;http://www.penofchaos.com/warham/donjon-resume.htm&quot;&gt;Le Donjon de Naheulbeuk&lt;/a&gt;, &lt;a href=&quot;http://www.knarfworld.net/episodes&quot;&gt;Les Aventuriers du Survivaure&lt;/a&gt;,
&lt;a href=&quot;http://www.adoprixtoxis.com/lite/download/adop_downloads.php&quot;&gt;Adoprixtoxis&lt;/a&gt;) have had in the French-speaking parts.&lt;/p&gt;
&lt;p&gt;The closest thing I can think of is the much more recent &lt;a href=&quot;http://www.pretendwizards.com/&quot;&gt;Pretend Wizards&lt;/a&gt;. Know
any other? Let me know &lt;a href=&quot;/reflets-d-acides-fini/#disqus_thread&quot;&gt;in the comments&lt;/a&gt;.&lt;/p&gt;
      </description>
      <pubDate>2017-04-10T22:00:00.000Z</pubDate>
      <link>http://norswap.com/reflets-d-acides-fini</link>
      <guid isPermaLink="true">http://norswap.com/reflets-d-acides-fini</guid>
    </item>
    <item>
      <title>LaTeX Tooling Guide</title>
      <description>
&lt;p&gt;I&amp;#39;ll let you in on a small secret: I hate LaTeX with a passion. It&amp;#39;s a bloated
mess with crazy syntax. It generates reams of warnings you can never totally get
rid of, and some of the most confusing and/or unhelpeful errors I have ever
seen. It needs to be run N times in a row. It even has a stupid name.&lt;/p&gt;
&lt;p&gt;Don Knuth wrote TeX, and it may have been art. But, to use a fashionable word,
TeX was never meant to scale to LaTeX. Pervasive use of non-hygienic macros and
constant manipulations of global values is a recipe for disaster.&lt;/p&gt;
&lt;p&gt;I wish I could avoid LaTeX completely, unfortuately conferences have templates
and the only other format available is MS Word, which has its own flaws (as I
recall, in how it handles numbering and floating figures).&lt;/p&gt;
&lt;p&gt;Anyhow, the current article is about how I setup my Latex to alleviate some of
these pains. I&amp;#39;ll start with a tour of what I use, then give you &lt;a href=&quot;https://github.com/norswap/template-sigplan/blob/master/makefile&quot;&gt;a makefile&lt;/a&gt;
and an &lt;a href=&quot;https://github.com/norswap/template-sigplan&quot;&gt;example git repository&lt;/a&gt; to bring all these tools together.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;installing-and-updating&quot;&gt;Installing and Updating&lt;/h2&gt;
&lt;p&gt;See &lt;a href=&quot;https://www.sharelatex.com/learn/Choosing_a_LaTeX_Compiler&quot;&gt;this article&lt;/a&gt; about available Latex distributions. I
recommend sticking to the tried-and-true, so that would be MiKTeX for Windows,
MacTeX for OSX and TeX Live for Linux.&lt;/p&gt;
&lt;p&gt;If you already have a Latex distribution installed, but it is not up to date,
this fantastic &lt;a href=&quot;https://tex.stackexchange.com/questions/55437/how-do-i-update-my-tex-distribution&quot;&gt;TeX Stack Exchange answer&lt;/a&gt; will tell you how to
update it.&lt;/p&gt;
&lt;h2 id=&quot;editors&quot;&gt;Editors&lt;/h2&gt;
&lt;p&gt;Most people will use some kind of Latex-mode that comes with their editor of
choice. I edit text in Emacs, and so I use &lt;a href=&quot;https://www.gnu.org/software/auctex/&quot;&gt;Auctex&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Nevertheless, it might be nicer to have something closer to an IDE for Latex. My
option of choice here is &lt;a href=&quot;http://www.texstudio.org/&quot;&gt;TeXstudio&lt;/a&gt;. Even though most of my Latex editing is in
Auctex, I use it from time to time to typeset math or help with diagnostics.&lt;/p&gt;
&lt;p&gt;Finally, but perhaps most importantly, there are a few online Latex editors. The
best of them is &lt;a href=&quot;https://www.sharelatex.com/&quot;&gt;ShareLaTeX&lt;/a&gt;. Its great strength is that it saves you from doing
any kind of setup, and in my own experience is super reliable.&lt;/p&gt;
&lt;p&gt;ShareLatex also filters out unhelpful warning and errors and does its best to
correlated what is left with your source file. Later in this guide we will show
command line tools that do the same thing.&lt;/p&gt;
&lt;p&gt;It&amp;#39;s good enough as an editor, but also allows realtime collaboration on a
document. Best of all, it now has the ability to sync with GitHub, meaning you
can mix online and offline collaboration.&lt;/p&gt;
&lt;h2 id=&quot;building&quot;&gt;Building&lt;/h2&gt;
&lt;p&gt;One of the famous annoyances of Latex is that it needs to be run multiple times
to get references right, interleaved with runs of your bibliography tool
(usually BibTeX or Biber).&lt;/p&gt;
&lt;p&gt;Fortunately this whole process can be automated. Most Latex distribution come
with a tool called &lt;code&gt;latexmk&lt;/code&gt;, which does automates all these invocations for
you.&lt;/p&gt;
&lt;p&gt;Beware that &lt;code&gt;latexmk&lt;/code&gt; requires Perl to run, which is not bundled with Latex.
This tends to be a caveat on Windows. If you are running Windows and want to use
&lt;code&gt;latexmk&lt;/code&gt;, install &lt;a href=&quot;http://strawberryperl.com/&quot;&gt;Strawberry Perl&lt;/a&gt; to fix the problem.&lt;/p&gt;
&lt;p&gt;There is a better tool, though, which is called &lt;a href=&quot;https://github.com/aclements/latexrun&quot;&gt;latexrun&lt;/a&gt;. &lt;code&gt;latexrun&lt;/code&gt; does what
&lt;code&gt;latexmk&lt;/code&gt; does, but also sanitizes Latex&amp;#39;s output to only show helpful errors,
similar to what you would see on ShareLatex.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;latexrun&lt;/code&gt; is a single Python3 script, which is great for portability. You can
even drop it directly in your paper&amp;#39;s git repository.&lt;/p&gt;
&lt;h2 id=&quot;errors&quot;&gt;Errors&lt;/h2&gt;
&lt;p&gt;If you&amp;#39;re using ShareLatex or &lt;code&gt;latexrun&lt;/code&gt;, you&amp;#39;re already pretty well covered
here.&lt;/p&gt;
&lt;p&gt;There is one more tool that bears mentioning: &lt;a href=&quot;https://github.com/dmwit/pulp&quot;&gt;pulp&lt;/a&gt;. &lt;code&gt;pulp&lt;/code&gt; lets you filter out
unwanted warnings and errors, and tries to correlated errors with file
positions.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pulp&lt;/code&gt;&amp;#39;s output is less pretty than that of &lt;code&gt;latexrun&lt;/code&gt;, but its great strength
is that it lets define custom filtering rules, to remove those annoying warnings
that you cannot get rid of, but break nothing. Or, more frequently, comes from
the class file that you are forced to use to submit you paper (I&amp;#39;m looking at
you, ACM).&lt;/p&gt;
&lt;p&gt;Here&amp;#39;s an exemple of filtering spec to get rid of all errors that pop up when
compiling the &lt;a href=&quot;http://www.sigplan.org/Resources/Author/&quot;&gt;acmart&lt;/a&gt; example file:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;!(boring | info | message | under | over
| p &amp;quot;hyperref&amp;quot; &amp;amp; &amp;quot;Token not allowed in a PDF string&amp;quot;
| &amp;quot;Class acmart Info&amp;quot;
| &amp;quot;file:line:error style messages enabled&amp;quot;
| &amp;quot;Excluding.*comment&amp;quot;
| &amp;quot;Processing.*comment&amp;quot;
| &amp;quot;Include comment&amp;quot;
| &amp;quot;comment.cut&amp;quot;
| &amp;quot;(msharpe)&amp;quot;
| &amp;quot;]&amp;quot; &amp;amp;&amp;amp; !&amp;quot;..&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The first line matches &lt;code&gt;pulp&lt;/code&gt;&amp;#39;s default specification.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pulp&lt;/code&gt; can be integrated with &lt;code&gt;latexmk&lt;/code&gt; fairly easily, by means of a
configuration file.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pulp&lt;/code&gt; is not as friendly to install as the other tools. Here is how to install
on OSX, assuming you already have &lt;a href=&quot;https://brew.sh/&quot;&gt;homebrew&lt;/a&gt; (on other platforms, you just need
to install the Haskell platform in some other way):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew cask install haskell-platform
git clone https://github.com/dmwit/pulp.git
cabal update
cabal install
PATH=&amp;quot;$HOME/Library/Haskell/bin:$PATH&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;preview&quot;&gt;Preview&lt;/h2&gt;
&lt;p&gt;Unless you&amp;#39;re working with TeXstudio or ShareLatex, you&amp;#39;ll need to preview the
generated PDF files using a PDF viewer. You want to use one that picks up
changes to the PDF on the disk, and reloads it on the fly, while keeping your
position in the PDF. On OSX, the built-in viewer (confusingly named &lt;em&gt;Preview&lt;/em&gt;)
does this adequately. On Windows, I&amp;#39;m partial to &lt;a href=&quot;https://www.sumatrapdfreader.org/free-pdf-reader.html&quot;&gt;Sumatra PDF&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;latexmk&lt;/code&gt; and &lt;code&gt;latexrun&lt;/code&gt; will automatically open a generated PDF file (using the
OS-determined associated tool).&lt;/p&gt;
&lt;h2 id=&quot;all-together&quot;&gt;All Together&lt;/h2&gt;
&lt;p&gt;I&amp;#39;ve put together &lt;a href=&quot;https://github.com/norswap/template-sigplan&quot;&gt;a repository&lt;/a&gt; that serves as template for papers using
the &lt;a href=&quot;http://www.sigplan.org/Resources/Author/&quot;&gt;ascmart sigplan&lt;/a&gt; style.&lt;/p&gt;
&lt;p&gt;The tooling centers around &lt;a href=&quot;https://github.com/norswap/template-sigplan/blob/master/makefile&quot;&gt;a makefile&lt;/a&gt;. The default configuration is to use
&lt;code&gt;latexmk&lt;/code&gt; with pulp integration. The following commands are available:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;make&lt;/code&gt; / &lt;code&gt;make view&lt;/code&gt;: generates the PDF file and displays it&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make pdf&lt;/code&gt;: generates the PDF file but does not display it; latex is run silently&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make verbose&lt;/code&gt;: like &lt;code&gt;make pdf&lt;/code&gt;, but shows error details&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make rebuild&lt;/code&gt;: forces a rebuild of the pdf, even if no changes are picked up&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make clean&lt;/code&gt;: removes all temporary files (for all tools!)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make mrproper&lt;/code&gt;: like &lt;code&gt;make clean&lt;/code&gt;, but also removes the generated PDF&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you don&amp;#39;t have &lt;code&gt;pulp&lt;/code&gt;, just delete or rename the &lt;code&gt;.latexmkrc&lt;/code&gt; file from the
repo.&lt;/p&gt;
&lt;p&gt;If &lt;code&gt;latexmk&lt;/code&gt; is not found or doesn&amp;#39;t work (for instance if Perl is not
installed), the makefile will fall back to using plain make rules, and &lt;code&gt;make
pdf&lt;/code&gt; will be verbose by default.&lt;/p&gt;
&lt;p&gt;It is also possible to use &lt;code&gt;latexrun&lt;/code&gt;, which is bundled in the repository, by
running &lt;code&gt;make run&lt;/code&gt; (Python3 required).&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pulp&lt;/code&gt; can be run standalone with &lt;code&gt;make pulp&lt;/code&gt; (pulp is not bundled in the
repository), assuming a compilation was attempted earlier and the &lt;code&gt;.log&lt;/code&gt; file is
left uncleaned.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DISCLAIMER&lt;/strong&gt;: I won&amp;#39;t be too assiduous in maintaining this makefile, and it
may even contain a few bugs. It should be taken as an example of how to do
things, rather than as a toolchain to be relied on.&lt;/p&gt;
&lt;p&gt;With all this, you&amp;#39;ll have no Latex excuses for turning your next paper late :)&lt;/p&gt;
      </description>
      <pubDate>2017-03-28T22:00:00.000Z</pubDate>
      <link>http://norswap.com/latex-tooling</link>
      <guid isPermaLink="true">http://norswap.com/latex-tooling</guid>
    </item>
    <item>
      <title>The Most Useful Kotlin Function</title>
      <description>
&lt;p&gt;Two years ago, I wrote a posted called &lt;a href=&quot;/java_caster&quot;&gt;The Most Useful Java Function&lt;/a&gt;.
This was rather tongue-in-cheek, as the function in question lets you cast from
a type to another, inferring the target type and suppressing unchecked cast
exceptions.&lt;/p&gt;
&lt;p&gt;Nevertheless, it is useful remarkably often.&lt;/p&gt;
&lt;p&gt;With Kotlin however, you can step up your game to a whole new level.
Introducing &lt;code&gt;proclaim&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-kotlin&quot;&gt;val list: Collection&amp;lt;Int&amp;gt; = ArrayList(list(1, 2, 3))
proclaim(list as ArrayList&amp;lt;Int&amp;gt;)
val x = list[0] // works
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The trick here is actually not &lt;code&gt;proclaim&lt;/code&gt;. It&amp;#39;s the fact that Kotlin has &amp;quot;smart
casts&amp;quot; which are essentially a form of flow typing.&lt;/p&gt;
&lt;p&gt;The type inferencer reasons out that if the cast &lt;code&gt;list as ArrayList&amp;lt;Int&amp;gt;&lt;/code&gt;
succeeds, then it means that &lt;code&gt;list&lt;/code&gt; is indeed an &lt;code&gt;ArrayList&amp;lt;Int&amp;gt;&lt;/code&gt;. And since
&lt;code&gt;list&lt;/code&gt; is a &lt;code&gt;val&lt;/code&gt;, its value can&amp;#39;t change. So in the rest of the body where the
cast appears, list is &amp;quot;smart-casted&amp;quot; to &lt;code&gt;ArrayList&amp;lt;Int&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Here is a possible definition for &lt;code&gt;proclaim&lt;/code&gt; (0 run-time overhead besides the
cast):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-kotlin&quot;&gt;@Suppress(&amp;quot;UNUSED_PARAMETER&amp;quot;, &amp;quot;NOTHING_TO_INLINE&amp;quot;)
inline fun proclaim (cast: Any)
    = Unit
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let&amp;#39;s get the obvious out of the way: of course this can be misused.&lt;/p&gt;
&lt;p&gt;On the other hand, just like the casting function, it is handy surprisingly
often. Type systems just aren&amp;#39;t powerful enough to be able to figure some things
we know to be true in our code. Especially that of Java and Kotlin.&lt;/p&gt;
&lt;p&gt;I&amp;#39;m not giving any examples: by their nature they would be short and easily
rewritten to accomodate the type system. But if you genuinely want to know, you
can search the net for &amp;quot;(path-)dependent types&amp;quot; use case or examples. Keep in
mind that&amp;#39;s just a subset of what we can&amp;#39;t express in Java/Kotlin though.&lt;/p&gt;
      </description>
      <pubDate>2017-03-19T23:00:00.000Z</pubDate>
      <link>http://norswap.com/kotlin-proclaim</link>
      <guid isPermaLink="true">http://norswap.com/kotlin-proclaim</guid>
    </item>
    <item>
      <title>Thread-Local Properties in Kotlin</title>
      <description>
&lt;p&gt;The &lt;a href=&quot;https://kotlinlang.org/&quot;&gt;Kotlin&lt;/a&gt; language has a feature called &lt;a href=&quot;https://kotlinlang.org/docs/reference/delegated-properties.html&quot;&gt;Delegated Properties&lt;/a&gt;. It basically
lets you delegate a getter (and optionally a setter) to an object that
implements the &lt;code&gt;getValue&lt;/code&gt; (and optionally the &lt;code&gt;setValue&lt;/code&gt;) method.&lt;/p&gt;
&lt;p&gt;I haven&amp;#39;t had much use of the feature, but I just found something very nifty
that could be done with it: create thread-local properties.&lt;/p&gt;
&lt;p&gt;Here&amp;#39;s an example of what you can do:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-kotlin&quot;&gt;import norswap.utils.thread_local.*

class Test
{
    val _i = ThreadLocal.withInitial { 0 }
    val i by _i

    val j by thread_local(0)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This creates two counters, &lt;code&gt;i&lt;/code&gt; and &lt;code&gt;j&lt;/code&gt; that are backed by instances of
&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/lang/ThreadLocal.html&quot;&gt;&lt;code&gt;ThreadLocal&amp;lt;Int&amp;gt;&lt;/code&gt;&lt;/a&gt;. In the first case we specify the instance explicitly,
while in the second case the &lt;code&gt;ThreadLocal&lt;/code&gt; instance is created implicitly, given
a default value (0 here).&lt;/p&gt;
&lt;p&gt;And now for the implementation:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-kotlin&quot;&gt;package norswap.utils.thread_local
import kotlin.properties.ReadWriteProperty
import kotlin.reflect.KProperty

class ThreadLocalDelegate&amp;lt;T&amp;gt; (val local: ThreadLocal&amp;lt;T&amp;gt;)
: ReadWriteProperty&amp;lt;Any, T&amp;gt;
{
    companion object {
        fun &amp;lt;T&amp;gt; late_init ()
            = ThreadLocalDelegate&amp;lt;T&amp;gt;(ThreadLocal())
    }

    constructor (initial: T):
        this(ThreadLocal.withInitial { initial })

    constructor (initial: () -&amp;gt; T):
        this(ThreadLocal.withInitial(initial))

    override fun getValue
            (thisRef: Any, property: KProperty&amp;lt;*&amp;gt;): T
        = local.get()

    override fun setValue
            (thisRef: Any, property: KProperty&amp;lt;*&amp;gt;, value: T)
        = local.set(value)
}

typealias thread_local&amp;lt;T&amp;gt; = ThreadLocalDelegate&amp;lt;T&amp;gt;

operator fun &amp;lt;T&amp;gt; ThreadLocal&amp;lt;T&amp;gt;.provideDelegate
        (self: Any, prop: KProperty&amp;lt;*&amp;gt;)
    = ThreadLocalDelegate(this)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let&amp;#39;s do a quick rundown. The &lt;code&gt;ThreadLocalDelegate&lt;/code&gt; class does what it says on
the tin: it delegates all attempts to read or write the property to the
&lt;code&gt;ThreadLocal&lt;/code&gt; instance.&lt;/p&gt;
&lt;p&gt;What is more interesting is the different ways you can instantiate the delegate:
you can pass it a &lt;code&gt;ThreadLocal&lt;/code&gt; instance (primary constructor), an initial
value, or a function that computes the initial value. The companion object also
has a function &lt;code&gt;late_init()&lt;/code&gt; that lets you create a delegate with no initial
value.&lt;/p&gt;
&lt;p&gt;Now we could use &lt;code&gt;ThreadLocalDelegate&lt;/code&gt; like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-kotlin&quot;&gt;val num by ThreadLocalDelegate(0)
val str by ThreadLocalDelegate&amp;lt;String&amp;gt;.late_init()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But that&amp;#39;s quite a mouthful, so there is a typealias &lt;code&gt;thread_local&lt;/code&gt; to make
things look nicer.&lt;/p&gt;
&lt;p&gt;Finally, the &lt;code&gt;provideDelegate&lt;/code&gt; operator function tells Kotlin how to create a
delegate from a &lt;code&gt;ThreadLocal&lt;/code&gt; instance. That&amp;#39;s how we could do &lt;code&gt;val i by _i&lt;/code&gt; at
the top of the post.&lt;/p&gt;
&lt;p&gt;Aaand that&amp;#39;s pretty much it for today :)&lt;/p&gt;
      </description>
      <pubDate>2017-03-18T23:00:00.000Z</pubDate>
      <link>http://norswap.com/kotlin-threadlocal-properties</link>
      <guid isPermaLink="true">http://norswap.com/kotlin-threadlocal-properties</guid>
    </item>
    <item>
      <title>Prolog Served DRY</title>
      <description>
&lt;p&gt;I believe there should be more programming books targetted at experienced
programmers. In particular, it seems like most books about programming
languages go to great lengths to be accessible to beginners.&lt;/p&gt;
&lt;p&gt;But this is actually detrimental to the experience of the experienced
programmer, who either wants to get up and running with the language as fast as
possible, or to understand what makes the language tick.&lt;/p&gt;
&lt;p&gt;Most of the time, I&amp;#39;m firmly in the second category: I want the mental models
and implentation details underlying the language. Those are of paramount
importance to reach proficiency with the language, yet they are rarely taught
explicitly.&lt;/p&gt;
&lt;p&gt;At the start of this year, I actually was in a position to do something about
this, as I needed to design the lab sessions for our Programming Language
Paradigms course. While the (master) students are not exactly &lt;em&gt;experienced&lt;/em&gt; in
the traditional sense, they already have at least 3 languages under their belts
and are quite capable of handling what we throw at them.&lt;/p&gt;
&lt;p&gt;The first language we cover is Prolog. There are three lab sessions on the topic
and I have now made them available &lt;a href=&quot;https://github.com/norswap/prolog-dry&quot;&gt;on Github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you&amp;#39;re interested in Prolog, give them a spin. You might find them
interesting, maybe not all that easy, and – I hope – enlightening.&lt;/p&gt;
      </description>
      <pubDate>2017-03-13T23:00:00.000Z</pubDate>
      <link>http://norswap.com/prolog-served-dry</link>
      <guid isPermaLink="true">http://norswap.com/prolog-served-dry</guid>
    </item>
    <item>
      <title>Patterns of Software: Highlights</title>
      <description>
&lt;p&gt;Last month, I finished reading the book Patterns of Software by Richard Gabriel
(available for free &lt;a href=&quot;https://www.dreamsongs.com/Files/PatternsOfSoftware.pdf&quot;&gt;here [pdf]&lt;/a&gt;). It&amp;#39;s a very interesting read, and I
recommend it to everyone who cares about the craft of writing software.&lt;/p&gt;
&lt;p&gt;I didn&amp;#39;t really know what to expect going into the book. The first part explains
architect Scott Alexanders&amp;#39; vision of patterns and pattern languages, and makes
a parallel with programming. It&amp;#39;s miles away from the &lt;a href=&quot;https://en.wikipedia.org/wiki/Design_Patterns&quot;&gt;gang of four&lt;/a&gt;, which is
just as well. The second part speaks about Gabriel&amp;#39;s own personal experiences. I
didn&amp;#39;t expect that, but it was nevertheless captivating. The book ends with an
expanded version of Gabriel&amp;#39;s &lt;a href=&quot;https://www.dreamsongs.com/RiseOfWorseIsBetter.html&quot;&gt;Worse is Better&lt;/a&gt; thesis.&lt;/p&gt;
&lt;p&gt;Below, I highlight some of my take-aways from the book. Most of the excerpts
come from the first part of the book and from the final chapter.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;reuse-vs-compression&quot;&gt;Reuse vs Compression&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Object-orientation promotes reuse through inheritance, but that is most
properly called compression: the logic is not encapsulated but interspersed.
It&amp;#39;s still there, but now it&amp;#39;s implicit. True reuse would be using library
functions. Compression is easier than true reuse because you don&amp;#39;t have to
think the interface as carefully.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;Compression is the characteristic of a piece of text that the meaning of any
part of it is “larger” than that particular piece has by itself. This
characteristic is created by a rich context, with each part of the text
drawing on that context—each word draws part of its meaning from its
surroundings.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;Such webs are examples of compression: The meaning of an expression written in
the context of the web is determined by the contents of the entire web. If you
need to change another part of the web, your compressed expression might
change its meaning, what it does, or even whether it works at all. So when we
build our tight inheritance hierarchy in object-oriented fashion—weblike or
pyramid style — we might be falling into this trap.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&quot;habitability-and-piecemeal-growth&quot;&gt;Habitability and Piecemeal Growth&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;It&amp;#39;s more important for code to be habitable than clear or beautiful.
Habitable means it can be extended easily and that new people can get to run
with the code easily. Perfect clarity is intimidating: it&amp;#39;s hard to improve.
If everything is interlocked too tightly, with no overhang on which to hang
extension, the program will be hard to extend, even though it is arguably
perfect. Abstraction is over-valued because a completed program full of the
right abstractions is beautiful. But most programs are by definition never
completed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;Habitability is the characteristic of source code that enables programmers,
coders, bug-fixers, and people coming to the code later in its life to
understand its construction and intentions, and to change it comfortably and
confidently.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;Piecemeal growth is the process of design and implementation in which software
is embellished, modified, reduced, enlarged, and improved through a process of
repair rather than of replacement.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&quot;pattern-languages&quot;&gt;Pattern Languages&lt;/h3&gt;
&lt;p&gt;According to Gabriel, pattern languages failed in (brick and mortar)
architecture because in addition to having the right process, you have to be an
artist, to manipulate the language artistically.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;symmetries&quot;&gt;Symmetries&lt;/h3&gt;
&lt;p&gt;The book discusses symmetries in the context of rug-weaving, but it think the
notion can apply to software as well. Code with local symmetry is easier to
read. Repeating patterns are pleasant, and many instantiation of the same
principles can make a codebase more familiar.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;language-design-adoption&quot;&gt;Language Design &amp;amp; Adoption&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Aesthetic principles and design goals don’t excite me, because often they have
nothing to do with how people really program (habitability and piecemeal
growth) but more often reflecting mathematical or abstract considerations and
look-Ma-no-hands single-mechanism trickery. One cannot deny, however, that a
small set of principles and goals applied to designing a small language
usually results in a consistent concise language.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;Languages are accepted and evolve by a social process, not a technical or technological one.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A language is minimally acceptable if it solves a new problem or make certain
tasks easier.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Early adopters are trying to hit a home run with new technology to make the
career moves or corporate improvements they crave.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&quot;productivity-impact&quot;&gt;Productivity &amp;amp; Impact&lt;/h3&gt;
&lt;p&gt;Gabriel recount the story of the Borland Quattro Pro for Windows, who was
tremendously productive.&lt;/p&gt;
&lt;p&gt;One of the most peculiar things this team did was having multi-hours meeting
each day to gvie overview of changes and define the interfaces.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A manager should be like the sweeper in curling: The sweeper runs ahead of the
stone and sweeps away debris from the path of the stone so that the progress
of the stone will be smooth and undisturbed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;An isolated good success can be better than a string of mediocre successes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&quot;poetry&quot;&gt;Poetry&lt;/h3&gt;
&lt;p&gt;Reading poetry is a good way to appreciate good fiction writing, and to become
better at writing in general.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;First, modern and contemporary poetry is about compression: Say as much in as
few words as possible. Poets avoid adjectives, adverbs, gerunds, and
complicated clausal structure. Their goal is to get the point across as fast
as they can, with the fewest words, and generally with the constraint of
maintaining an easily spoken verbal rhythm.&lt;/p&gt;
&lt;p&gt;Second, poets say old things in new ways. When you read good poetry, you will
be amazed at the insights you get by seeing a compressed expression presenting
a new way of looking at things.&lt;/p&gt;
&lt;p&gt;Third, poets love language and write sentences in ways you could never
imagine. I don’t mean that their sentences are absurd or unusual—rather, the
sentences demonstrate the poet’s keen interest in minimally stating a complex
image or point.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&quot;software-development-models&quot;&gt;Software Development Models&lt;/h3&gt;
&lt;p&gt;Richard Gabriel is well known for his famous essay on &lt;a href=&quot;https://www.dreamsongs.com/RiseOfWorseIsBetter.html&quot;&gt;Worse is Better&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;Worse is Better&lt;/em&gt; model is explained in the book, but Gabriel expands on how
the model is highly market-efficient.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It takes less development time, so it is out early and can be adopted as the
de facto standard in a new market area.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;If it has some value, it will be ported or adopted and will tend to spread
like a virus. If it has value and becomes popular, there will be pressure to
improve it, and over time it will acquire the quality and feature-richness of
systems designed another way, but with the added advantage that the features
will be those the customers or users want, not those that the developers think
they should want.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;Worse-is-better takes advantage of the natural advantages of incremental
development. Incremental improvement satisfies some human needs. When
something is an incremental change over something else already learned,
learning the new thing is easier and therefore more likely to be adopted than
is something with a lot of changes. To some it might seem that there is value
to users in adding lots of features, but there is, in fact, more value in
adding a simple, small piece of technology with evolvable value.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;One of the key characteristics of the mainstream customer is conservatism.
Such a customer does not want to take risks; he (let’s say) doesn’t want to
debug your product; he doesn’t want to hit a home run so he can move up the
corporate ladder. Rather, he wants known, predictable improvement over what he
is doing today with his own practices and products. He wants to talk to other
folks like himself and hear a good story. He doesn’t want to hear how someone
bet it all and won; he wants to hear how someone bought the product expecting
10% improvement and got 11%. This customer is not interested in standing out
from the crowd, particularly because of a terrible error in his organization
based on a bad buying decision.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;The ideal of the free market supports this kind of growth. If you decide to
spend a lot of resources developing a radical innovation product, you may be
throwing away development money. Why bet millions of dollars all at once on
something that could flop when you can spend a fraction, test the ideas,
improve the ideas based on customer feedback, and spend the remainder of money
on the winning evolution of the technology? If you win, you will win more,
and, if you lose, you will lose less. Moreover, you will be out there ahead of
competition which is happily making the right-thing mistake.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;When you put out small incremental releases, you can do it more frequently
than you can with large releases, and you can charge money for each of those
releases. With careful planning you can charge more for a set of improvements
released incrementally than the market would have borne had you released them
all at once, taking a risk on their acceptance to boot. Moreover, when you
release many small improvements, you have less risk of having a recall, and
managing the release process also is easier and cheaper. With incremental
improvement, the lifetime of an idea can be stretched out, and so you don’t
have to keep coming up with new ideas. Besides, who wants to base one’s
economic success on the ability to come up with new ideas all the time?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Sounds familiar?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The ideal situation is that your proprietary value is small compared with the
total size of your product, which perhaps can be constructed from standard
parts by either you or your customers or partners.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;Wade’s Maxim: No one ever made money by typing.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!------&gt;
&lt;blockquote&gt;
&lt;p&gt;What this means in our context is that you cannot try to build too large and
complex product by yourself—you need to get parts from other places if your
product is complex, and you must make your value clear and apparent, and it
must be a simple decision for a customer to use your technology.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&quot;epilogue&quot;&gt;Epilogue&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;In software engineering—if there really be such a thing—we have worked
thoroughly on Firmness, some during the last 10 years on Commodity, and none
on Delight.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Clearly that has changed some. But have we gone far enough?&lt;/p&gt;
      </description>
      <pubDate>2017-03-12T23:00:00.000Z</pubDate>
      <link>http://norswap.com/patterns-of-software</link>
      <guid isPermaLink="true">http://norswap.com/patterns-of-software</guid>
    </item>
    <item>
      <title>Ruby&#39;s Lookups &amp; Scopes</title>
      <description>
&lt;p&gt;This is the third and last article in the &lt;a href=&quot;/ruby-dark-corners&quot;&gt;Ruby&amp;#39;s Dark Corners&lt;/a&gt; series.&lt;/p&gt;
&lt;h2 id=&quot;lookups-in-ruby&quot;&gt;Lookups in Ruby&lt;/h2&gt;
&lt;p&gt;The great difficulty in Ruby is knowing what names refer
to. &lt;a href=&quot;/ruby-module-linearization&quot;&gt;Linearization&lt;/a&gt; showed us that knowing which method gets
called is non-trivial. Unfortunately it&amp;#39;s only part of the story.&lt;/p&gt;
&lt;p&gt;In Ruby, names can refer to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;methods: &lt;code&gt;x.name&lt;/code&gt; or &lt;code&gt;name&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;local variables: &lt;code&gt;name&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;class variables: &lt;code&gt;@@name&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;global variables: &lt;code&gt;$name&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;constants: &lt;code&gt;NAME&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;modules: &lt;code&gt;Name&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We also would like to know on which module methods are defined. By the way,
since &lt;code&gt;Class &amp;lt; Module&lt;/code&gt;, when we say &lt;em&gt;modules&lt;/em&gt; we mean &lt;em&gt;modules and classes&lt;/em&gt;,
unless otherwise specified.&lt;/p&gt;
&lt;p&gt;There are five big concepts involved with these lookups (and then some fun
sprinkled on top):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;self&lt;/strong&gt;: what does &lt;code&gt;self&lt;/code&gt; refer to?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;definee&lt;/strong&gt;: if a method definition appears, on which class is it defined?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;scoping&lt;/strong&gt;: knowing which constructs create new scope for local variables and
which don&amp;#39;t&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nesting&lt;/strong&gt;: what are the surrounding modules? (often called &lt;em&gt;cref&lt;/em&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let&amp;#39;s look at how each type of name is resolved.&lt;/p&gt;
&lt;h2 id=&quot;local-global-variables&quot;&gt;Local &amp;amp; Global Variables&lt;/h2&gt;
&lt;p&gt;Global variables are prefixed with &lt;code&gt;$&lt;/code&gt; and they are easy: they are accessible
everywhere.&lt;/p&gt;
&lt;p&gt;Local variables depend on static scopes. New scopes are create when you enter a
new method or module body, or when you enter a method call&amp;#39;s block. Control flow
statements do not create scopes!&lt;/p&gt;
&lt;p&gt;Only scopes created by blocks inherit their parent&amp;#39;s scope. Scope created by
methods and modules are completely isolated from their parent&amp;#39;s scope. It is
sometimes said that &lt;code&gt;module&lt;/code&gt;, &lt;code&gt;class&lt;/code&gt; and &lt;code&gt;def&lt;/code&gt; are &lt;em&gt;scope gates&lt;/em&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;x = 1
module Foo
  p x # NameError
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There is however a trick you can use:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;x = 1
Foo = Module.new do
  p x # ok
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It is possible to make local variables survive their lexical scope:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;def foo
  x = 0
  [lambda { x += 1 }, lambda { p x }]
end
x, y = foo
x.call()
y.call() # 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Something else that is peculiar: a variable is &amp;quot;in scope&amp;quot; in an assignment to it
has appeared before in the current scope.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;p x # NameError
x = 1
# but
x = 1 if false
p x # nil
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reflection can help with local variables too: the &lt;code&gt;binding&lt;/code&gt; method (both
&lt;code&gt;Kernel#binding&lt;/code&gt; and &lt;code&gt;Proc#binding&lt;/code&gt;) returns a &lt;code&gt;Binding&lt;/code&gt; object which describes
the local variables in scope.&lt;/p&gt;
&lt;h2 id=&quot;instance-variables&quot;&gt;Instance Variables&lt;/h2&gt;
&lt;p&gt;Instance variables are prefixed by &lt;code&gt;@&lt;/code&gt;. They are &lt;strong&gt;always&lt;/strong&gt; looked up on &lt;code&gt;self&lt;/code&gt;.
If an instance variable doesn&amp;#39;t exists (it has never been assigned), it
evaluates to &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Note that this means that instance variables are effectively instance-private:
an instance of &lt;code&gt;X&lt;/code&gt; cannot access the instance variables of another instance of
&lt;code&gt;X&lt;/code&gt;. This is more restrictive than &lt;code&gt;private&lt;/code&gt; in Java for instance. However, it&amp;#39;s
easy to use reflection to side-step this with
&lt;code&gt;Object#instance_variable_get/set&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;class-variables&quot;&gt;Class Variables&lt;/h2&gt;
&lt;p&gt;Class variables are prefixed with &lt;code&gt;@@&lt;/code&gt;. They are defined on modules, and can be
accessed both in module bodies and in method bodies. Strangely, they can also be
accessed in the meta-class of a module (and its meta-meta-class, etc).&lt;/p&gt;
&lt;p&gt;If a module inherits multiple version of a class variable, it&amp;#39;s always the first
inherited version that wins (so the first &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;include&lt;/code&gt; or &lt;code&gt;preprend&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;You can list the class variables &amp;quot;owned&amp;quot; by a module with
&lt;code&gt;Module#class_variables(false)&lt;/code&gt; (&lt;code&gt;false&lt;/code&gt; says not to include class inherited
class variables). Interestingly, class variables can &amp;quot;migrate&amp;quot;: if the module is
a class that has a class variable &lt;code&gt;@@a&lt;/code&gt;, and that &lt;code&gt;@@a&lt;/code&gt; becomes defined on one
of its ancestor, the class variable will disappear from the class. This will not
happen for non-class modules however.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;class T; @@a = &amp;#39;t&amp;#39;; end
class Object; @@a = &amp;#39;o&amp;#39;; end
class T
  p @@a # o
  p class_variables(false) # []
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If a class variable is accessed before it has been assigned, a &lt;code&gt;NameError&lt;/code&gt;
occurs.&lt;/p&gt;
&lt;p&gt;Final catch, class variables can only be accessed inside the body of a class
that inherits/includes the class defining the variables. This means you can&amp;#39;t
use the &lt;code&gt;@@x&lt;/code&gt; notation with the &lt;code&gt;eval&lt;/code&gt; method that we will see later. However,
you can use reflection: &lt;code&gt;Module#class_variable_get/set&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;constants-and-modules-&quot;&gt;Constants (and Modules)&lt;/h2&gt;
&lt;p&gt;Constants start with an uppercase letter, and modules are actually a kind of
constant.&lt;/p&gt;
&lt;p&gt;Constants depend on the notion of &lt;code&gt;nesting&lt;/code&gt;: you can access a constant if it is
declared inside a module body that is around you, or in one of the ancestors of
the current module (but &lt;strong&gt;not&lt;/strong&gt; in an ancestor of a surrounding module!). You
can also use &lt;code&gt;::&lt;/code&gt; to navigate through modules:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;X = 0
module A
  X = 1
  p ::X # 0
  module B; module C; Y = 2; end; end
  module D
    p X # 1
    p B::C::Y
  end
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The following exemple illustrates two gotchas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You don&amp;#39;t have access to constants defined in an ancestor of a surrounding
module.&lt;/li&gt;
&lt;li&gt;Constants in surrounding modules take precedence over constants in ancestors.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;module A; X = &amp;#39;a&amp;#39;; end
module B; Y = &amp;#39;b&amp;#39;; end
module C
  include A
  p X # ok
  Y = &amp;#39;c&amp;#39;
  module D
    include B
    p Y # &amp;#39;c&amp;#39;!
    p X # NameError
  end
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The module body really has to be around you:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;module A::B::C; p Y; end # ok (Y defined in C)
module A::D; p X; end # NameError (X defined in A)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can access the current nesting with &lt;code&gt;Module::nesting&lt;/code&gt; and clarify the
example:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;module A
  module D; p Module.nesting; end # [A, A::D]
end
module A::D; p Module.nesting; end # [A::D]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Of course, if you try to access a constant before it has been assigned, a
&lt;code&gt;NameError&lt;/code&gt; ensues. &lt;code&gt;Module::constants&lt;/code&gt; will list the constants defined at the
point of call, while &lt;code&gt;Module#constants&lt;/code&gt; will list the constants defined by the
module (and optionally by its ancestors, depending on the argument).&lt;/p&gt;
&lt;h2 id=&quot;methods&quot;&gt;Methods&lt;/h2&gt;
&lt;p&gt;Methods are looked up on the receiver (the thing before the dot). If there is no
receiver, &lt;code&gt;self&lt;/code&gt; is assumed. Then it&amp;#39;s just a matter to perform the lookup
according to &lt;a href=&quot;/ruby-module-linearization&quot;&gt;linearization&lt;/a&gt;. &lt;code&gt;self&lt;/code&gt; may also have a meta-class which has
priority on all other ancestors.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Refinements&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;However, there is another subtlety, called &lt;em&gt;refinements&lt;/em&gt;. In Ruby, it is common
to use &lt;em&gt;monkey patching&lt;/em&gt; to open a class and add and redefine methods. However,
if every library starts doing this, you can end up with nasty conflicts.
Refinements were introduced as a solution to this problem.&lt;/p&gt;
&lt;p&gt;Refinements can only be defined in non-class modules, and only classes can be refined:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;class C
  def foo; &amp;#39;foo&amp;#39;; end
end

module M
  refine C do
    def foo; &amp;#39;bar&amp;#39;; end
  end
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Defining a refinement does nothing by itself. You have to use the &lt;code&gt;Module#using&lt;/code&gt;
function to enable some refinements in the current module:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;module N
  p C.new.foo # &amp;#39;foo&amp;#39;
  using M
  p C.new.foo # &amp;#39;bar&amp;#39;
end
p C.new.foo # &amp;#39;foo&amp;#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;using&lt;/code&gt; statements are somewhat peculiar, because they are strictly lexical in
scope. Said otherwise, the introduced refinements have the same visibility as
constants, &lt;strong&gt;excepted&lt;/strong&gt; that the &lt;code&gt;using&lt;/code&gt; is not inherited (via sublassing or
include):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;class A; using M; end
class B &amp;lt; A
  p C.new.foo # &amp;#39;foo&amp;#39;
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;However, refinements themselves are inherited:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-ruby&quot;&gt;module O
  include M
end
module P
  using O
  p C.new.foo # &amp;#39;bar&amp;#39;
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;How prioritary are refinements? Refinements always take priority over everything
else. What if multiple refinements conflicts? The latest innermost &lt;code&gt;using&lt;/code&gt; statement
always wins.&lt;/p&gt;
&lt;p&gt;You can get a list of modules whose refinements are visible with
&lt;code&gt;Module::used_modules&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;on-which-module-are-methods-defined-&quot;&gt;On which module are methods defined?&lt;/h2&gt;
&lt;p&gt;Last, but not least, when you use the &lt;code&gt;def&lt;/code&gt; keyword, on which module are the
methods defined? The not-so-helpful answer is that these methods become instance
methods of &lt;em&gt;the definee&lt;/em&gt;. Entering certain declarations and calling certain
functions change the definee, as we&amp;#39;ll see in the next section.&lt;/p&gt;
&lt;h2 id=&quot;how-self-and-the-definee-change&quot;&gt;How &lt;code&gt;self&lt;/code&gt; and the definee change&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;where&lt;/th&gt;
&lt;th&gt;self&lt;/th&gt;
&lt;th&gt;definee&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;top-level (file or REPL)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;main&lt;/code&gt; (an instance of &lt;code&gt;Object&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;Object&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;in a module&lt;/td&gt;
&lt;td&gt;module&lt;/td&gt;
&lt;td&gt;module&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;in &lt;code&gt;class &amp;lt;&amp;lt; X&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;metaclass of &lt;code&gt;X&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;metaclass of &lt;code&gt;X&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;in a &lt;code&gt;def method&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;receiver&lt;/td&gt;
&lt;td&gt;surrounding module&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;in a &lt;code&gt;def X.method&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;receiver (&lt;code&gt;X&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;metaclass of &lt;code&gt;X&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;X.instance_eval&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;receiver (&lt;code&gt;X&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;metaclass of &lt;code&gt;X&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;X.class_eval&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;receiver (&lt;code&gt;X&lt;/code&gt;, a module)&lt;/td&gt;
&lt;td&gt;receiver (&lt;code&gt;X&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Also note that &lt;code&gt;Module#module_eval&lt;/code&gt; is an alias for &lt;code&gt;Module#class_eval&lt;/code&gt;. There
are also variants called &lt;code&gt;class/module/instance_exec&lt;/code&gt;, which do the same thing
as the &lt;code&gt;eval&lt;/code&gt; version but allow passing additional arguments to the block
(useful to make instance variables accessible to the block). This is &lt;strong&gt;the
only&lt;/strong&gt; difference between the &lt;code&gt;exec&lt;/code&gt; and &lt;code&gt;eval&lt;/code&gt; family, despite the
documentation seeming to hint at some bizarre lookup behaviour.&lt;/p&gt;
&lt;p&gt;Note that for the two &lt;code&gt;def&lt;/code&gt; rows, the definee is both the module on which the
method itself is being defined, and the definee for nested method definitions.&lt;/p&gt;
&lt;p&gt;At first, it may seem that &lt;code&gt;class/module_eval&lt;/code&gt; does the same as a &lt;code&gt;module&lt;/code&gt; or
&lt;code&gt;class&lt;/code&gt; block. However, you cannot open a class inside a method, so &lt;code&gt;class_eval&lt;/code&gt;
helps in you need to evaluate something in the context of a class as part of a
method. Note however that it is possible to open metaclasses in a method through
&lt;code&gt;class &amp;lt;&amp;lt; X&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There are also string-based &lt;code&gt;eval&lt;/code&gt; based. But things are complex enough as it
is, if you can avoid to go there, please do.&lt;/p&gt;
&lt;p&gt;Finally, if you experiment, you may find out you cannot define singleton method
on the classes &lt;code&gt;Integer&lt;/code&gt; and &lt;code&gt;Symbol&lt;/code&gt; (e.g. &lt;code&gt;def Integer.foo&lt;/code&gt;). I assume for
performance reasons.&lt;/p&gt;
&lt;h2 id=&quot;doing-better-&quot;&gt;Doing Better?&lt;/h2&gt;
&lt;p&gt;The situation is a bit hairy, to say the least. How could we simplify things?&lt;/p&gt;
&lt;p&gt;Once you wrap your head around them, globals, class and instance variables are
rather simple. One caveat: I would allow accessing class variables whenever
&lt;code&gt;self&lt;/code&gt; is the class, removing an exception with little benefit.&lt;/p&gt;
&lt;p&gt;Regarding local variables, it&amp;#39;s not quite obvious why scope gates are needed.
Maybe because they would encourage people to use class-local variables instead
of class variables? It doesn&amp;#39;t really hurt, but adds yet another thing to
remember to the language.&lt;/p&gt;
&lt;p&gt;Constants lookup is puzzling. My take is that constants should be looked up
first in the ancestors then in the surrounding module and its ancestors, etc.
That would be much less surprising. I don&amp;#39;t see &lt;strong&gt;any&lt;/strong&gt; reason to do things in
the current way (surrounding modules take precedence over the ancestors).&lt;/p&gt;
&lt;p&gt;I think a useful heuristic is to preserve the ability to move code vertically.
Code that is well-defined in a class should have the same meaning in a subclass
or in a superclass, unless some symbols are overridden in the class. Surrounding
modules should not affect such code.&lt;/p&gt;
&lt;p&gt;Refinements blatantly violate the heuristic above. I can appreciate why: the
idea was to to restrict monkey patching to a well-defined blob of code, and
inheriting &lt;code&gt;using&lt;/code&gt; statements goes against that by forcing monkey patching on
sub-classes. On the other hand, I think it goes against the principle of least
surprise by violating my heuristic above.&lt;/p&gt;
&lt;p&gt;Another reason refinements are awkward is that they introduce not one, but two
new forms of lookup: &lt;code&gt;using&lt;/code&gt; statements and refinement definitions (&lt;code&gt;refine&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;I believe it was a mistake to overload modules with another role as &amp;quot;refinement
container&amp;quot;. It would probably have been better to merge &lt;code&gt;using&lt;/code&gt; into &lt;code&gt;refine&lt;/code&gt;:
make all refinements active as soon as defined, and combine them through
inheritance (using the ancestor chain).&lt;/p&gt;
&lt;p&gt;If it was really desirable to refine a method only within a superclass but not
within its subclasses, the &lt;code&gt;private&lt;/code&gt; function could have been reused. This would
have made refinement lookups similar to method lookup, and would have surprised
no-one.&lt;/p&gt;
&lt;p&gt;There is a big problem with this idea: dynamically looking up refinement is
expensive: you now need to walk two ancestor chains instead of one for every
lookup. A simple countermeasure: forbid adding new refinements dynamically,
which is already the case in the current version.&lt;/p&gt;
&lt;p&gt;Finally, I would allow opening classes and modules in methods, and allow any
expression in place of the class name. This would remove the need for
&lt;code&gt;class_eval&lt;/code&gt; method. If needed one can add the restriction that only existing
classes and modules can be opened in methods.&lt;/p&gt;
&lt;p&gt;I would also remove &lt;code&gt;instance_eval&lt;/code&gt;, however it has no immediate analog. I would
retool the &lt;code&gt;class &amp;lt;&amp;lt; X&lt;/code&gt; notation for this purpose. The metaclass can still be
accessed through &lt;code&gt;Object#singleton_class&lt;/code&gt;. This field can be used in conjunction
with &lt;code&gt;class&lt;/code&gt; so that &lt;code&gt;class X.singleton_class&lt;/code&gt; achieves the previous effect of
&lt;code&gt;class &amp;lt;&amp;lt; X&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So in summary:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Allow class variables to be used anywhere where &lt;code&gt;self&lt;/code&gt; is the class.&lt;/li&gt;
&lt;li&gt;Abolish scope gates?&lt;/li&gt;
&lt;li&gt;Lookup constants first in the ancestors, then in the surround class and their
ancestors.&lt;/li&gt;
&lt;li&gt;Merge &lt;code&gt;using&lt;/code&gt; into &lt;code&gt;refine&lt;/code&gt;, and make this new kind of refinement inheritable,
except when qualified with &lt;code&gt;private&lt;/code&gt;. Forbid dynamically adding refinements to
avoid dynamic refinement lookup.&lt;/li&gt;
&lt;li&gt;Remove the &lt;code&gt;instance_eval&lt;/code&gt; and &lt;code&gt;class_eval&lt;/code&gt; methods; allow opening classes in
methods; and make &lt;code&gt;class &amp;lt;&amp;lt; X&lt;/code&gt; take the meaning of &lt;code&gt;X.instance_eval&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Add a &lt;code&gt;metaclass&lt;/code&gt; field to class &lt;code&gt;Object&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Of course, it&amp;#39;s too late for Ruby. But for a language inspired by Ruby, these
points are worth considering.&lt;/p&gt;
      </description>
      <pubDate>2017-03-05T23:00:00.000Z</pubDate>
      <link>http://norswap.com/ruby-lookups-scopes</link>
      <guid isPermaLink="true">http://norswap.com/ruby-lookups-scopes</guid>
    </item>
  </channel>
</rss>
